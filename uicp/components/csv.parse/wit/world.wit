package uicp:task-csv-parse@1.2.0;

interface types {
  record input {
    source: string,
    has-header: bool,
  }
  type output = list<list<string>>;
}

interface task {
  use types.{input, output};
  enum error { cancelled, invalid-input, csv-error }
  run: func(job: string, input: input) -> result<output, error>;
}

world entry {
  // Guests call methods on wasi:io/streams::output-stream (e.g., blocking-write-and-flush).
  // Import the interface explicitly to satisfy component-model linking.
  import wasi:io/streams@0.2.8;
  import wasi:clocks/monotonic-clock@0.2.0;
  import uicp:host/control@1.0.0;
  export task;
}
